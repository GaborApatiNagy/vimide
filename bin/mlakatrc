#!/bin/bash
export PATH=$PATH:~/bin
export VISUAL=vi
export TERM=xterm

if [ "$DISPLAY" == ":0" ]; then
    # Configure IBM trackpoint on physical terminal
    xinput set-int-prop "TPPS/2 IBM TrackPoint" "Evdev Wheel Emulation" 8 1
    xinput set-int-prop "TPPS/2 IBM TrackPoint" "Evdev Wheel Emulation Button" 8 2
    xinput set-int-prop "TPPS/2 IBM TrackPoint" "Evdev Wheel Emulation Timeout" 16 200
    xinput set-int-prop 10 "Evdev Wheel Emulation" 8 1
    xinput set-int-prop 10 "Evdev Wheel Emulation Button" 8 2
    xinput set-int-prop 10 "Evdev Wheel Emulation Timeout" 16 200
    echo "Trackpoint patch applied"
fi

if [ "$DISPLAY" == ":13" -o "$DISPLAY" == ":14" ]; then
    # During screen capture, use a short prompt
    PS1="[\\w]\\$ "
fi

# Change the background color depending on the last command's exit value
PROMPT_COMMAND="if [[ \$? == 0 ]]; then xsetroot -solid green; else xsetroot -solid red; fi "
